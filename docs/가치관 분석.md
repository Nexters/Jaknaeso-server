# 가치관 분석

## 1. 가치관 점수 계산

- 하나의 캐릭터를 얻기 위해 제출해야 하는 설문 응답은 15개이다.
- 하나의 캐릭터는 15개의 데이터만을 활용하여 판별한다.
- 답변의 점수는 음수값을 가질 수 있다.
- 가치관마다 답변 개수가 상이하므로 가치관별로 점수를 계산한다.
- 마이너스 점수를 갖는 경우, 점수 범위가 왜곡될 수 있으므로 다음 규칙으로 정규화한다.

```yaml
# 정규화 결과 = (해당 가치관의 원점수 - 해당 가치관의 최소 점수) / (해당 가치관의 최대 점수 - 해당 가치관의 최소 점수)

input:
  # 모험 가치관의 점수 리스트 
  adventure: 1, 1, 1, -1, -1, -3
  # 내가 선택한 모험 옵션 점수 총합
  original-score: -1점
output:
  # 원점수 : -1점 | 최소 점수 : -5 | 최대 점수 : 3
  # = (-1 - (-5)) / (3 - (-5))
  # = 4 / 8
  0.5
```

### 1-1. 가치관 지표 계산

- 정규화를 적용하기 위해 가치관별 최대 점수, 최소 점수를 구해야 한다.
- 최대 점수, 최소 점수를 계산하기 위해 양의 점수의 합, 음의 점수의 합을 구한다.

```yaml
input: 모험(1), 모험(-1), 안전(1), 보편(-1)
output:
  # (양의 점수 합, 음의 점수 합) -> 최대 점수, 최소 점수로 이어짐
  모험(1,  -1)
  안전(1,   0)
  보편(0,  -1)
```

ref. `KeywordMetrics`

## 2. 가치관 분석 정보

- 설문 번들 내부에 있는 가치관 점수 목록과 사용자가 제출한 설문 응답 목록을 바탕으로 가치관 분석 리포트를 반환한다.
- 설문 응답 목록으로 점수를 계산하되 정규화를 적용하여 음의 값이 나오지 않도록 한다.
- 정규화된 점수에 100을 곱하여 퍼센트를 구한다.

ref. `ValueReports`
